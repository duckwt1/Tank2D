<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.tank2d.masterserver.ui.MasterServerDashboard"
            prefHeight="700.0" prefWidth="900.0">
   
   <!-- Top Section: Server Control -->
   <top>
      <VBox spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
         <Label text="Tank2D Master Server Dashboard" textFill="white">
            <font>
               <Font name="System Bold" size="20.0" />
            </font>
         </Label>
         
         <HBox spacing="15" alignment="CENTER_LEFT">
            <Label text="Port:" textFill="white" />
            <TextField fx:id="txtPort" prefWidth="80.0" />
            <Button fx:id="btnStartStop" text="Start Server" onAction="#onStartStopClick" 
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;" />
            
            <Region HBox.hgrow="ALWAYS" />
            
            <Label text="Status:" textFill="white" />
            <Label fx:id="lblServerStatus" text="Stopped" />
            <Label text="Port:" textFill="white" />
            <Label fx:id="lblPort" text="N/A" textFill="white" />
         </HBox>
      </VBox>
   </top>
   
   <!-- Center Section: Main Content -->
   <center>
      <HBox spacing="10">
         <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
         </padding>
         
         <!-- Left Side: Statistics and Client List -->
         <VBox spacing="10" prefWidth="400.0">
            
            <!-- Statistics Panel -->
            <VBox spacing="5" style="-fx-border-color: #bdc3c7; -fx-border-width: 1; -fx-background-color: #ecf0f1;">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <Label text="Server Statistics" style="-fx-font-weight: bold; -fx-font-size: 14;" />
               
               <HBox spacing="20">
                  <VBox alignment="CENTER">
                     <Label text="Connected Clients" style="-fx-font-size: 12;" />
                     <Label fx:id="lblTotalClients" text="0" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #3498db;" />
                  </VBox>
                  <VBox alignment="CENTER">
                     <Label text="Total Users" style="-fx-font-size: 12;" />
                     <Label fx:id="lblTotalUsers" text="0" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                  </VBox>
               </HBox>
            </VBox>
            
            <!-- Client List -->
            <VBox spacing="5" VBox.vgrow="ALWAYS">
               <Label text="Connected Clients" style="-fx-font-weight: bold; -fx-font-size: 14;" />
               <TableView fx:id="tblClients" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="colClientIP" prefWidth="120.0" text="IP Address" />
                     <TableColumn fx:id="colUsername" prefWidth="120.0" text="Username" />
                     <TableColumn fx:id="colConnectTime" prefWidth="100.0" text="Connect Time" />
                  </columns>
                  <columnResizePolicy>
                     <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                  </columnResizePolicy>
               </TableView>
            </VBox>
         </VBox>
         
         <!-- Right Side: Server Log -->
         <VBox spacing="10" HBox.hgrow="ALWAYS">
            <HBox spacing="10" alignment="CENTER_LEFT">
               <Label text="Server Log" style="-fx-font-weight: bold; -fx-font-size: 14;" />
               <Region HBox.hgrow="ALWAYS" />
               <Button text="Clear Log" onAction="#onClearLog" 
                       style="-fx-background-color: #e74c3c; -fx-text-fill: white;" />
            </HBox>
            
            <TextArea fx:id="txtLog" editable="false" wrapText="true" VBox.vgrow="ALWAYS"
                      style="-fx-font-family: 'Courier New'; -fx-font-size: 12; -fx-background-color: #2c3e50; -fx-text-fill: #ecf0f1;" />
         </VBox>
      </HBox>
   </center>
   
   <!-- Bottom Section: Status Bar -->
   <bottom>
      <HBox spacing="10" style="-fx-background-color: #34495e; -fx-padding: 5;">
         <Label text="Tank2D Master Server v1.0" textFill="white" />
         <Region HBox.hgrow="ALWAYS" />
         <Label text="Â© 2025 Tank2D Team" textFill="white" />
      </HBox>
   </bottom>
</BorderPane>